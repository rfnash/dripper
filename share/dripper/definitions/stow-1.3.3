#!/usr/bin/env bash

PACKAGE=stow
VERSION=1.3.3

set_variables

if [ ! -z $_INSTALL ]; then
  pushd $SRC_PATH
  curl -O http://ftp.gnu.org/pub/gnu/stow/$STOW.tar.gz
  tar xzf $STOW.tar.gz
  cd $STOW
  ./configure \
    --prefix=$PREFIX \
    --program-suffix=_local \
    --disable-dependency-tracking
  make install
  popd

  # FIXME: Force the removal of the man folder because for some weird
  #       reason raises an error. Needs investigation.
  rm -rf $PREFIX/man

  $PREFIX/bin/$STOW_BINARY -d $STOW_PATH $STOW
  # Skip default task!
  exit
fi

if [ ! -z $_LINK ]; then
  $PREFIX/bin/$STOW_BINARY -v -d $STOW_PATH $STOW
  exit
fi
