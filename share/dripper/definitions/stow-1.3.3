#!/usr/bin/env bash

PACKAGE=stow
VERSION=1.3.3

set_variables

if _install; then
  pushd $SRC_PATH
  curl -O http://ftp.gnu.org/pub/gnu/stow/$STOW.tar.gz
  tar xzf $STOW.tar.gz
  cd $STOW
  ./configure \
    --prefix=$PREFIX \
    --disable-dependency-tracking
  make install
  popd

  # FIXME: Force the removal of the man folder because for some weird
  #        reason raises an error. Needs investigation.
  rm -rf $PREFIX/man

  $PREFIX/bin/stow -d $STOW_PATH $STOW
  exit
fi

if _link; then
  $PREFIX/bin/stow -v -d $STOW_PATH $STOW
  touch $STOW_PATH/.stow_$STOW
  exit
fi
